(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t,a){e.exports=a.p+"static/media/spacex_logo.223d880a.svg"},153:function(e,t,a){e.exports=a.p+"static/media/satellite.141ccf71.svg"},319:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(143),s=a.n(r),o=(a(331),function(e){e&&e instanceof Function&&a.e(1).then(a.bind(null,358)).then(function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),i(e),r(e),s(e)})}),c=a(19),l=a(20),u=a(24),m=a(11),d=a(22),p=a(144),h=a.n(p),f=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("header",{className:"App-header"},i.a.createElement("img",{src:h.a,className:"App-logo",alt:"logo"}),i.a.createElement("p",{className:"title"},"StarLink Tracker"))}}]),t}(n.Component),g=a(91),b=a(145),v=a(356),E=a(357),j=a(65),w=a.n(j),O="FEF2DU-RUM2QC-AD9RGJ-4V9M",y="52",L="rest/v1/satellite/above",S="http://34.228.12.97",k=a(362),x=a(366),D=a(367),N=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).showSatellite=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||a.props.onShow(t)})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return i.a.createElement(k.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:11}},wrapperCol:{xs:{span:24},sm:{span:13}}},{className:"sat-setting",onSubmit:this.showSatellite}),i.a.createElement(k.a.Item,{label:"Longitude(degrees)"},e("longitude",{rules:[{required:!0,message:"Please input your Longitude"}]})(i.a.createElement(x.a,{min:-180,max:180,style:{width:"100%"},placeholder:"Please input Longitude"}))),i.a.createElement(k.a.Item,{label:"Latitude(degrees)"},e("latitude",{rules:[{required:!0,message:"Please input your Latitude"}]})(i.a.createElement(x.a,{placeholder:"Please input Latitude",min:-90,max:90,style:{width:"100%"}}))),i.a.createElement(k.a.Item,{label:"Elevation(meters)"},e("elevation",{rules:[{required:!0,message:"Please input your Elevation"}]})(i.a.createElement(x.a,{placeholder:"Please input Elevation",min:-413,max:8850,style:{width:"100%"}}))),i.a.createElement(k.a.Item,{label:"Altitude(degrees)"},e("altitude",{rules:[{required:!0,message:"Please input your Altitude"}]})(i.a.createElement(x.a,{placeholder:"Please input Altitude",min:0,max:90,style:{width:"100%"}}))),i.a.createElement(k.a.Item,{label:"Duration(secs)"},e("duration",{rules:[{required:!0,message:"Please input your Duration"}]})(i.a.createElement(x.a,{placeholder:"Please input Duration",min:0,max:90,style:{width:"100%"}}))),i.a.createElement(k.a.Item,{className:"show-nearby"},i.a.createElement(D.a,{type:"primary",htmlType:"submit",style:{textAlign:"center"}},"Find Nearby Satellite")))}}]),t}(n.Component),I=k.a.create({name:"satellite-setting"})(N),C=a(301),P=a(360),M=a(368),T=a(354),A=a(153),F=a.n(A),R=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).onChange=function(t){var a=t.target,n=a.dataInfo,i=a.checked,r=e.state.selected,s=e.addOrRemove(n,i,r);e.setState({selected:s})},e.addOrRemove=function(e,t,a){var n=a.some(function(t){return t.satid===e.satid});return t&&!n&&(a=[].concat(Object(g.a)(a),[e])),!t&&n&&(a=a.filter(function(t){return t.satid!==e.satid})),a},e.onShowSatMap=function(){e.props.onShowMap(e.state.selected)},e.state={selected:[]},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.satInfo?this.props.satInfo.above:[],a=this.props.isLoad,n=this.state.selected;return i.a.createElement("div",{className:"sat-list-box"},i.a.createElement(D.a,{className:"sat-list-btn",size:"large",disabled:0===n.length,onClick:this.onShowSatMap},"Track on the map"),i.a.createElement("hr",null),a?i.a.createElement("div",{className:"spin-box"},i.a.createElement(C.a,{tip:"Loading...",size:"large"})):i.a.createElement(P.a,{className:"sat-list",itemLayout:"horizontal",size:"small",dataSource:t,renderItem:function(t){return i.a.createElement(P.a.Item,{actions:[i.a.createElement(M.a,{dataInfo:t,onChange:e.onChange})]},i.a.createElement(P.a.Item.Meta,{avatar:i.a.createElement(T.a,{size:50,src:F.a}),title:i.a.createElement("p",null,t.satname),description:"Launch Date: ".concat(t.launchDate)}))}}))}}]),t}(n.Component),z=a(304),B=a(361),q=a(370),J=a(365),U=a(359),W=a(371),H=a(363),K=a(364),G=960,Q=600,V=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).track=function(t){if(!t[0].hasOwnProperty("positions"))throw new Error("no position data");var a=t[0].positions.length,n=(e.props.observerData.duration,e.map.context2),i=new Date,r=0,s=setInterval(function(){var o=new Date,c=0===r?0:o-i,l=new Date(i.getTime()+60*c);if(n.clearRect(0,0,G,Q),n.font="bold 14px sans-serif",n.fillStyle="#333",n.textAlign="center",n.fillText(Object(K.a)(l),G/2,10),r>=a)return clearInterval(s),e.setState({isDrawing:!1}),void(document.getElementsByClassName("hint")[0].innerHTML="");t.forEach(function(t){var a=t.info,n=t.positions;e.drawSat(a,n[r])}),r+=60},1e3)},e.drawSat=function(t,a){var n=a.satlongitude,i=a.satlatitude;if(n&&i){var r=t.satname.match(/\d+/g).join(""),s=e.map,o=s.projection,c=s.context2,l=o([n,i]);c.fillStyle=e.color(r),c.beginPath(),c.arc(l[0],l[1],4,0,2*Math.PI),c.fill(),c.font="bold 11px sans-serif",c.textAlign="center",c.fillText(r,l[0],l[1]+14)}},e.generateMap=function(t){var a=Object(B.a)().scale(170).translate([G/2,Q/2]).precision(.1),n=Object(q.a)(),i=Object(U.a)(e.refMap.current).attr("width",G).attr("height",Q),r=Object(U.a)(e.refTrack.current).attr("width",G).attr("height",Q),s=i.node().getContext("2d"),o=r.node().getContext("2d"),c=Object(J.a)().projection(a).context(s);t.forEach(function(e){s.fillStyle="#B3DDEF",s.strokeStyle="#000",s.globalAlpha=.7,s.beginPath(),c(e),s.fill(),s.stroke(),s.strokeStyle="rgba(220, 220, 220, 0.1)",s.beginPath(),c(n()),s.lineWidth=.1,s.stroke(),s.beginPath(),s.lineWidth=.5,c(n.outline()),s.stroke()}),e.map={projection:a,graticule:n,context:s,context2:o}},e.state={isLoading:!1,isDrawing:!1},e.map=null,e.color=H.a(W.a),e.refMap=i.a.createRef(),e.refTrack=i.a.createRef(),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.a.get("https://unpkg.com/world-atlas@1/world/110m.json").then(function(t){var a=t.data,n=Object(z.a)(a,a.objects.countries).features;e.generateMap(n)}).catch(function(e){console.log("err in fetch map data ",e.message)})}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;if(e.satData!==this.props.satData){var i=this.props.observerData,r=i.latitude,s=i.longitude,o=i.elevation,c=(i.altitude,60*i.duration);this.setState({isLoading:!0});var l=this.props.satData.map(function(e){var t=e.satid,a="".concat(S,"/api/").concat("rest/v1/satellite/positions","/").concat(t,"/").concat(r,"/").concat(s,"/").concat(o,"/").concat(c,"/&apiKey=").concat(O);return w.a.get(a)});Promise.all(l).then(function(e){var a=e.map(function(e){return e.data});(n.setState({isLoading:!1,isDrawing:!0}),t.isDrawing)?document.getElementsByClassName("hint")[0].innerHTML="Please wait for these satellite animation to finish before selection new ones!":n.track(a)}).catch(function(e){console.log("err in fetch satellite position -> ",e.message)})}}},{key:"render",value:function(){var e=this.state.isLoading;return i.a.createElement("div",{className:"map-box"},e?i.a.createElement("div",{className:"spinner"},i.a.createElement(C.a,{tip:"Loading...",size:"large"})):null,i.a.createElement("canvas",{className:"map",ref:this.refMap}),i.a.createElement("canvas",{className:"track",ref:this.refTrack}),i.a.createElement("div",{className:"hint"}))}}]),t}(n.Component),X=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).showMap=function(t){e.setState(function(e){return Object(b.a)({},e,{satList:Object(g.a)(t)})})},e.showNearbySatellite=function(t){e.setState({isLoadingList:!0,setting:t}),e.fetchSatellite(t)},e.fetchSatellite=function(t){var a=t.latitude,n=t.longitude,i=t.elevation,r=t.altitude,s="".concat(S,"/api/").concat(L,"/").concat(a,"/").concat(n,"/").concat(i,"/").concat(r,"/").concat(y,"/&apiKey=").concat(O);e.setState({isLoadingList:!0}),w.a.get(s).then(function(t){console.log(t.data),e.setState({satInfo:t.data,isLoadingList:!1})}).catch(function(e){console.log("err in fetch satellite -> ",e)})},e.state={satInfo:null,satList:null,setting:null,isLoadingList:!1},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isLoadingList,a=e.satInfo,n=e.satList,r=e.setting;return i.a.createElement(v.a,{className:"main"},i.a.createElement(E.a,{span:8,className:"left-side"},i.a.createElement(I,{onShow:this.showNearbySatellite}),i.a.createElement(R,{isLoad:t,satInfo:a,onShowMap:this.showMap})),i.a.createElement(E.a,{span:16,className:"right-side"},i.a.createElement(V,{satData:n,observerData:r})))}}]),t}(n.Component),_=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("footer",{className:"footer"},"\xa92020 StarLink Tracker. All Rights Reserved. Website Made by Xingda Bao")}}]),t}(n.Component);var Y=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(f,null),i.a.createElement(_,null),i.a.createElement(X,null))};s.a.createRoot(document.getElementById("root")).render(i.a.createElement(Y,null)),o()},324:function(e,t,a){e.exports=a(319)},331:function(e,t,a){}},[[324,3,2]]]);
//# sourceMappingURL=main.aa3b096b.chunk.js.map